"use strict";(self.webpackChunkah_sdk_doc=self.webpackChunkah_sdk_doc||[]).push([[7640],{6325:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var d=t(4848),i=t(8453);const r={sidebar_position:5},s="React Native Specific Usage",o={id:"videoSDK/usage",title:"React Native Specific Usage",description:"We have important components to understand:",source:"@site/docs/videoSDK/usage.md",sourceDirName:"videoSDK",slug:"/videoSDK/usage",permalink:"/docs/videoSDK/usage",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/videoSDK/usage.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Retrieve Access Token",permalink:"/docs/videoSDK/retrieveAccessToken"},next:{title:"Coach",permalink:"/docs/category/coach"}},c={},l=[{value:"AHVideoComponent",id:"ahvideocomponent",level:2},{value:"AHVideoComponent props",id:"ahvideocomponent-props",level:4},{value:"AHVideoComponent controls",id:"ahvideocomponent-controls",level:4},{value:"Examples",id:"examples",level:3}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"react-native-specific-usage",children:"React Native Specific Usage"}),"\n",(0,d.jsx)(n.p,{children:"We have important components to understand:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"import { AHVideoComponent } from 'ahsdk';\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"AHVideoComponent - the video component responsible for displaying local and remote camera feeds"}),"\n",(0,d.jsx)(n.li,{children:"Video ref object - a ref object created using the React.useRef hook that gives access to video controls e.g. connecting to rooms, muting audio, etc."}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"ahvideocomponent",children:"AHVideoComponent"}),"\n",(0,d.jsx)(n.p,{children:"A component that contains both local view and remote (Participant) view. You may find the below types for references."}),"\n",(0,d.jsx)(n.h4,{id:"ahvideocomponent-props",children:"AHVideoComponent props"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Props"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Required"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"token"}),(0,d.jsxs)(n.td,{children:["The access token that is retrieved from ",(0,d.jsx)(n.code,{children:"ahsdk"})," connectRoom method."]}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"room"}),(0,d.jsx)(n.td,{children:"The room id that is retrieved from scheduler."}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"onRoomDidConnect"}),(0,d.jsx)(n.td,{children:"Fires when the current user has connected to the video room."}),(0,d.jsx)(n.td,{children:"RoomEventCb"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"onRoomDidDisconnect"}),(0,d.jsx)(n.td,{children:"Fires when the current user has disconnected from the video room."}),(0,d.jsx)(n.td,{children:"RoomEventCb"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"onRoomDidFailToConnect"}),(0,d.jsx)(n.td,{children:"Fires when the user has failed to connect to the room."}),(0,d.jsx)(n.td,{children:"RoomErrorEventCb"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"ref"}),(0,d.jsx)(n.td,{children:"React.ref that enables the control methods."}),(0,d.jsx)(n.td,{children:"React.RefObject"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"container"}),(0,d.jsx)(n.td,{children:"Styles for the main container."}),(0,d.jsx)(n.td,{children:"ViewStyle"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"callContainer"}),(0,d.jsx)(n.td,{children:"Styles for the call container."}),(0,d.jsx)(n.td,{children:"ViewStyle"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"remoteGrid"}),(0,d.jsx)(n.td,{children:"Styles for the remote (Participant) grid"}),(0,d.jsx)(n.td,{children:"ViewStyle"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"remoteVideo"}),(0,d.jsx)(n.td,{children:"Styles for the remote video."}),(0,d.jsx)(n.td,{children:"ViewStyle"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"localVideoContainer"}),(0,d.jsx)(n.td,{children:"Styles for the local video container."}),(0,d.jsx)(n.td,{children:"ViewStyle"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"localVideo"}),(0,d.jsx)(n.td,{children:"Styles for the local video."}),(0,d.jsx)(n.td,{children:"ViewStyle"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"cameraEnable"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"avatar"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"styleDisCamera"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"ViewStyle"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"participantDisabledVideo"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"userName"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"IMembers"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"coachName"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"userImage"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"coachImage"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"draggable"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"isAudioEnabled"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"isVideoEnabled"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"onParticipantAddedTrack"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"(value: number) => void"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"onParticipantDisabledVideoTrack"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"() => void"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"onDisconnect"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"() => void"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"onConnect"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"() => void"}),(0,d.jsx)(n.td,{})]})]})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"export interface IVideoComponentProps {\n  token: string;\n  room: string;\n  onRoomDidConnect?: RoomEventCb;\n  onRoomDidDisconnect?: RoomErrorEventCb;\n  onRoomDidFailToConnect?: RoomErrorEventCb;\n  ref?: React.Ref<any>;\n  container?: ViewStyle;\n  remoteGrid?: ViewStyle;\n  callContainer?: ViewStyle;\n  remoteVideo?: ViewStyle;\n  localVideo?: ViewStyle;\n  localVideoContainer?: ViewStyle;\n  cameraEnable: boolean;\n  avatar?: string;\n  styleDisCamera: object;\n  participantDisabledVideo?: boolean;\n  userName: IMembers;\n  coachName?: string;\n  userImage?: string;\n  coachImage?: string;\n  draggable?: boolean;\n  isAudioEnabled?: boolean;\n  isVideoEnabled?: boolean;\n  onParticipantAddedTrack?: (value: number) => void;\n  onParticipantDisabledVideoTrack?: () => void;\n  onDisconnect?: () => void;\n  onConnect?: () => void;\n}\n"})}),"\n",(0,d.jsx)(n.h4,{id:"ahvideocomponent-controls",children:"AHVideoComponent controls"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"First, call the useRef hook at the top level of your component and optionally pass in AHVideoComponentEvents as a type paramater"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"// prettier-ignore\nconst videoRef = React.useRef <Partial<AHVideoComponentEvents>>(null);\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Pass the ref into the AHVideoComponent"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"return (\n  <AHVideoComponent\n    ref={videoRef}\n    //other props\n  />\n);\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Events"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Required"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"connect"}),(0,d.jsx)(n.td,{children:"Connect to the call with room id, that has been passed via props"}),(0,d.jsx)(n.td,{children:"Room Event"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"disconnect"}),(0,d.jsx)(n.td,{children:"Disconnect the joined call"}),(0,d.jsx)(n.td,{children:"Room Event"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"toggleLocalVideo"}),(0,d.jsx)(n.td,{children:"Turn on/off the camera"}),(0,d.jsx)(n.td,{children:"Camera Event"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"flipCamera"}),(0,d.jsx)(n.td,{children:"Flip the camera, front or back camera"}),(0,d.jsx)(n.td,{children:"Camera Event"}),(0,d.jsx)(n.td,{children:"Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"mute"}),(0,d.jsx)(n.td,{children:"Mute the microphone"}),(0,d.jsx)(n.td,{children:"Mic Event"}),(0,d.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"export type AHVideoComponentEvents = {\n  connect?: () => void;\n  disconnect?: () => void;\n  toggleLocalVideo: () => void;\n  flipCamera: () => void;\n  mute: () => void;\n};\n"})}),"\n",(0,d.jsx)(n.p,{children:"Here you can see a complete example of a simple application that uses almost all the apis:"}),"\n",(0,d.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"\nimport { useDispatch, useSelector } from 'react-redux';\nimport { BackHandler, Pressable, SafeAreaView, StatusBar, View } from 'react-native';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { ahSDK, AHVideoComponent } from 'ahsdk';\nimport type { AHVideoComponentEvents, CoachProfile } from 'ahsdk';\n\n<AHVideoComponent\n  ref={videoRef}\n  room={roomId}\n  onParticipantAddedTrack={onParticipantAddedVideoTrack}\n  token={accessToken}\n  userName={userName}\n  onRoomDidFailToConnect={_onRoomDidFailToConnect}\n  coachName={coach.name}\n  coachImage={coach.photo}\n  remoteVideo={\n    numberParticipant > 0 && {\n          flex: 1,\n          marginTop: 0,\n          marginLeft: 0,\n          marginRight: 0,\n        }\n  }\n  localVideoContainer={\n    numberParticipant > 0\n      ? {\n          borderRadius: 20,\n          transform: [{ scaleX: getScale() ? -1 : 1 }],\n        }\n      : {\n          height: windowDimensions.height,\n          width: windowDimensions.width,\n          left: 0,\n          bottom: 0,\n          right: 0,\n          top: 0,\n          transform: [{ scaleX: getScale() ? -1 : 1 }],\n        }\n  }\n  container={{ marginTop: 0 }}\n  cameraEnable={numberParticipant == 0 || isCameraEnabled}\n  styleDisCamera={styles.disCamera}\n  draggable={numberParticipant > 0}\n/>\n"})}),"\n",(0,d.jsx)(n.admonition,{type:"tip",children:(0,d.jsx)(n.p,{children:"Android platform can added the permission grant during the screen initial stage."})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var d=t(6540);const i={},r=d.createContext(i);function s(e){const n=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);